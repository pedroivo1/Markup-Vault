# RGB & Intel Video & Audio Firmware

## Keyboard RGB (OpenRGB)

```bash
sudo pacman -S --noconfirm openrgb i2c-tools
echo "i2c-dev" | sudo tee /etc/modules-load.d/i2c-dev.conf
```

### Auto Start

```bash
sudo nano /etc/systemd/system/openrgb-boot.service
```

```toml
[Unit]
Description=OpenRGB Boot Configuration
After=network.target

[Service]
Type=oneshot
ExecStartPre=/usr/bin/sleep 2
ExecStart=/usr/bin/openrgb --profile <profile>
User=root
Group=root

[Install]
WantedBy=multi-user.target
```


```bash
sudo mkdir -p /root/.config
sudo cp -r /home/<user>/.config/OpenRGB /root/.config/
```

```bash
# Move the profiles to the root folder
sudo systemctl daemon-reload
sudo systemctl enable openrgb-boot.service
```
Note: Since Openrgb runs on `<user>` the service runs as `root`, you must copy your profile files from your user directory to the root configuration folder so the service can find them.

| Profile | Effect Type | Color |
| :--- | :--- | :--- |
| pink | Static | #F117AC |
| rainbow | Rainbow Wave |  |

### Alias
```


## Intel GPU
```bash
sudo pacman -S --noconfirm mesa lib32-mesa vulkan-intel \
lib32-vulkan-intel intel-media-driver libva-utils vulkan-tools

sudo nano /etc/environment
```

```Plaintext
LIBVA_DRIVER_NAME=iHD
VDPAU_DRIVER=va_gl
```

## Intel CPU
```bash
sudo pacman -S power-profiles-daemon
sudo systemctl enable --now power-profiles-daemon
```

```bash

cpum() {
    local PROFILE_ARG=$1
    local FAN_ARG=$2

    case "$PROFILE_ARG" in
        h|2)
            powerprofilesctl set performance
            echo "CPU: Performance"
            ;;
        m|1)
            powerprofilesctl set balanced
            echo "CPU: Balanced"
            ;;
        l|0)
            powerprofilesctl set power-saver
            echo "CPU: Powersave"
            ;;
        *)
            echo "Erro: Perfil invÃ¡lido. Use h/m/l ou 2/1/0"
            return 1
            ;;
    esac

    if [ -z "$FAN_ARG" ]; then
        case "$PROFILE_ARG" in
            h|2) FAN_ARG=2 ;;
            m|1) FAN_ARG=1 ;;
            l|0) FAN_ARG=0 ;;
        esac
    fi

    case "$FAN_ARG" in
        2) i8kfan 2 2 > /dev/null && echo "Fan: High Speed" ;;
        1) i8kfan 1 1 > /dev/null && echo "Fan: Medium Speed" ;;
        0) i8kfan 0 0 > /dev/null && echo "Fan: Off" ;;
        *) echo "| Fan: Erro (Use 0, 1 ou 2)" ;;
    esac
}
```

## Audio Drivers (SOF Firmware)
```bash
sudo pacman -S --noconfirm pipewire pipewire-alsa pipewire-jack \
pipewire-pulse wireplumber sof-firmware alsa-ucm-conf alsa-utils


systemctl --user enable --now pipewire.service \
pipewire-pulse.service wireplumber.service
```

## Bluetooth Setup
```bash
sudo pacman -S --noconfirm bluez bluez-utils blueman
sudo systemctl enable --now bluetooth.service
```

```bash
bluetoothctl
    power on 
    scan on
    connect <MAC>
    trust <MAC>
```
